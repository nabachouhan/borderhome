<%- include('../partials/adminhead') %>

<body>
  <%- include('../partials/loader') %>
  <!-- admin-Sidebar -->
  <div class="admin-sidebar" id="admin-sidebar">
    <h4 class="text-white mb-4">Border Monitoring</h4>
    <div class="mb-4">
      <i class="bi bi-person-circle me-2"></i><%= full_name %>
    </div>
    <a href="/admin/home"><i class="bi bi-grid"></i> Home</a>
    <a href="/admin/upload" class="active"><i class="bi bi-gem"></i> Upload</a>
    <a href="/admin/publish"><i class="bi bi-gem"></i> Publish</a>
    <a href="/admin/manage"><i class="bi bi-person"></i> Manage</a>
    <a href="" id="adminLogout"><i class="bi bi-journal-text"></i> Logout</a>
  </div>

  <!-- Main Content -->
  <div class="content" id="mainContent">
    <div class="themed-box topbar d-flex flex-wrap justify-content-between align-items-center gap-2 themed-box">
      <div class="d-flex align-items-center gap-3">
        <i class="bi bi-list fs-3 cursor-pointer" id="toggleSidebarBtn" style="cursor: pointer;"></i>
        <h4 class="mb-0">Dashboard</h4>
      </div>
      <div class="d-flex align-items-center gap-2">

        <i class="bi bi-bell me-2"></i>
        <i class="bi bi-gear"></i>
      </div>
    </div>

    <!-- <main class="main"> -->


    <main class="main p-4">

      <div class="row g-3 align-items-end mb-3">

        <div class="col-lg-4 col-md-6 d-flex align-items-center">
          <label class="form-label d-block me-2">Status</label>
          <div class="btn-group" role="group" aria-label="Upload selection">
            <input type="radio" class="btn-check" name="formOption" id="vectorOption" value="vector" checked>
            <label class="btn btn-outline-secondary" for="vectorOption">Vector Upload</label>

            <input type="radio" class="btn-check" name="formOption" id="rasterOption" value="raster">
            <label class="btn btn-outline-secondary" for="rasterOption">Raster Upload</label>

            <input type="radio" class="btn-check" name="formOption" id="metadataOption" value="metadata">
            <label class="btn btn-outline-secondary" for="metadataOption">Append Meta Data</label>
          </div>

        </div>

        <!-- Upload Form -->
        <form id="vectorUploadForm" action="" method="POST" class="form-active themed-box p-4 rounded">
          <div class="row">
            <div class="col-6 mb-3">
              <label for="uploaded_file" class="form-label">Select File [only zipped shapefile or
                tiff]</label>
              <input type="file" class="form-control" id="uploaded_file" name="uploaded_file" accept=".zip ,.tif" required>
            </div>
            <div class="col-6 mb-3">
              <label for="file_type" class="form-label">Select Type</label>
              <select class="form-control" id="file_type" name="file_type" required>
                <option value="vector">zipped shapefile</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="col-6 mb-3">
              <label for="theme" class="form-label">Select Theme</label>
              <select class="form-control" id="theme" name="theme" required>
                <option value="">Select</option>
                <option value="administratives">Administratives</option>
                <option value="aoi">AOI</option>
                <option value="lulc">LULC</option>
                <option value="lulcchange">LULC Changes</option>
                <option value="hotspots">HOTSPOT</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label for="file_name" class="form-label">File Name</label>
              <input type="text" class="form-control" id="file_name" name="file_name" pattern="[a-z0-9_]+" placeholder="e.g., lulc_assam_2025" required>
              <div class="invalid-feedback">
                Filename can only contain lowercase letters, numbers, and underscores.
              </div>
            </div>

          </div>
          <div class="row">

            <div class="col-md-6 mb-3">
              <label for="srid" class="form-label">SRID (Spatial Reference ID)</label>
              <input type="text" class="form-control" id="srid" name="srid" value="4326" placeholder="e.g., 4326" required>
            </div>
          </div>

          <div class="button-group">
            <button type="submit" class="btn btn-success">Upload</button>
          </div>
        </form>


        <div id="rasterUploadForm" class="form-hidden themed-box p-4 rounded">
  <div class="row">
    <div class="col-6 mb-3">
      <label for="upload_raster_file" class="form-label">Select File (GeoTIFF)</label>
      <input
        type="file"
        class="form-control"
        id="upload_raster_file"
        accept=".tif"
      />
    </div>

    <div class="col-6 mb-3">
      <label for="file_type_raster" class="form-label">Select Type</label>
      <select class="form-control" id="file_type_raster" disabled>
        <option value="raster" selected>GeoTIFF</option>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="col-6 mb-3">
      <label for="raster_theme" class="form-label">Theme</label>
      <select class="form-control" id="raster_theme">
        <option value="raster">Raster</option>
      </select>
    </div>

    <div class="col-6 mb-3">
      <label for="raster_file_name" class="form-label">File Name</label>
      <input
        type="text"
        class="form-control"
        id="raster_file_name"
        pattern="[a-z0-9_]+"
        placeholder="lulc_assam_2025"
      />
    </div>
  </div>

  <div class="button-group">
    <button type="button" class="btn btn-success" id="rasterUploadBtn">
      Upload
    </button>
  </div>
</div>


        <!-- Metadata Form -->
        <form id="metadataForm" action="/admin/metadata" method="POST" class="form-hidden themed-box p-4 rounded">
          <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: 33.33%" aria-valuenow="33.33" aria-valuemin="0" aria-valuemax="100">Step 1 of 3</div>
          </div>

          <!-- Step 1: Identification -->
          <div class="form-step active">
            <h4>Identification</h4>
            <div class="row">
              <div class="col-6 mb-3">

                <label for="meta_file_name">File Name</label>
                <select id="meta_file_name" class="form-control" name="meta_file_name">
                  <option value="">Select File Name</option>
                  <% catalogItems.forEach(function(item) { %>
                  <option value="<%=item.file_name%>">
                    <%=item.file_name%>
                  </option>
                  <% }) %>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label for="title" class="form-label">Title*</label>
                <input type="text" class="form-control" id="title" name="title" required>
              </div>


            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="spatial_coverage" class="form-label">Spatial / Geographical Coverage
                  Area*</label>
                <input type="text" class="form-control" id="spatial_coverage" name="spatial_coverage">
              </div>
              <div class="col-md-6 mb-3">
                <label for="publisher" class="form-label">Publisher</label>
                <input type="text" class="form-control" id="publisher" name="publisher">
              </div>

            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="public_access_level" class="form-label">Public Access Level</label>
                <input type="text" class="form-control" id="public_access_level" name="public_access_level" value="Public">
              </div>
              <div class="col-md-6 mb-3">
                <label for="meta-theme" class="form-label">Theme/Topic Category</label>
                <input type="text" class="form-control" id="meta-theme" name="meta-theme" readonly>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="citation" class="form-label">Citation</label>
                <input type="text" class="form-control" id="citation" name="citation">
              </div>
              <div class="col-md-6 mb-3">
                <label for="source_date" class="form-label">Source date*</label>
                <input type="date" class="form-control" id="source_date" name="source_date" required>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="meta-filetype" class="form-label">File Type</label>
                <input type="text" class="form-control" id="meta-filetype" name="meta-filetype" readonly>
              </div>
              <div class="col-md-6 mb-3">
                <label for="group_visibility" class="form-label">Group Content Visibility</label>
                <select class="form-select" id="group_visibility" name="group_visibility">
                  <option value="Public" selected>Public</option>
                  <option value="Private">Private</option>
                </select>
              </div>
            </div>

            <div class="button-group">
              <button type="button" class="btn btn-primary next-btn">Next</button>
            </div>
          </div>

          <!-- Step 2: Contact & Quality -->
          <div class="form-step">
            <h4>Descriptive and Quality Information</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="data_abstract" class="form-label">Data Identification Abstract</label>
                <input type="text" class="form-control" id="data_abstract" name="data_abstract">
              </div>
              <div class="col-md-6 mb-3">
                <label for="area_of_interest" class="form-label">Area of Interest</label>
                <input type="text" class="form-control" id="area_of_interest" name="area_of_interest">
              </div>
            </div>


            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="metadata_date" class="form-label">Metadata Date Stamp*</label>
                <input type="date" class="form-control" id="metadata_date" name="metadata_date">
              </div>
              <div class="col-md-6 mb-3">
                <label for="data_quality" class="form-label">Data Quality</label>
                <input type="text" class="form-control" id="data_quality" name="data_quality" value="High resolution data with minimal errors">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="language" class="form-label">Dataset Language</label>
                <input type="text" class="form-control" id="language" name="language" value="English">
              </div>
            </div>

            <div class="button-group">
              <button type="button" class="btn btn-secondary prev-btn">Previous</button>
              <button type="button" class="btn btn-primary next-btn">Next</button>
            </div>
          </div>

          <!-- Step 3: Metadata Information -->
          <div class="form-step">
            <h4>Spatial Reference Information</h4>
            <div class="row">

              <div class="col-md-6 mb-3">
                <label for="projection" class="form-label">Projection Information</label>
                <input type="text" class="form-control" id="projection" name="projection" value="GCS, WGS 1984">
              </div>
              <div class="col-md-6 mb-3">
                <label for="scale" class="form-label">Scale</label>
                <input type="text" class="form-control" id="scale" name="scale" value="" placeholder="eg. 1:50000">
              </div>
            </div>

            <div class="button-group">
              <button type="button" class="btn btn-secondary prev-btn">Previous</button>
              <button type="submit" class="btn btn-success">Submit</button>
            </div>
          </div>
        </form>
    </main>
  </div>

  <script src="/admin-assets/js/handlesubmits.js"></script>
  <script src="/admin-assets/js/adminUpload.js"></script>
  <script src="https://unpkg.com/tus-js-client/dist/tus.js"></script>

  <%- include('../partials/footer') %>